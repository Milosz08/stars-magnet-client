<!--
  ~ Copyright (c) 2023 by MILOSZ GILGA <http://miloszgilga.pl>
  ~
  ~ File name: company-details-left-card.component.html
  ~ Last modified: 6/9/23, 5:31 PM
  ~ Project name: stars-magnet-client
  ~
  ~ Licensed under the MIT license; you may not use this file except in compliance with the License.
  ~
  ~ Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated
  ~ documentation files (the "Software"), to deal in the Software without restriction, including without limitation the
  ~ rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to
  ~ permit persons to whom the Software is furnished to do so, subject to the following conditions:
  ~
  ~ THE ABOVE COPYRIGHT NOTICE AND THIS PERMISSION NOTICE SHALL BE INCLUDED IN ALL COPIES OR
  ~ SUBSTANTIAL PORTIONS OF THE SOFTWARE.
  ~
  ~ The software is provided "as is", without warranty of any kind, express or implied, including but not limited
  ~ to the warranties of merchantability, fitness for a particular purpose and noninfringement. In no event
  ~ shall the authors or copyright holders be liable for any claim, damages or other liability, whether in an
  ~ action of contract, tort or otherwise, arising from, out of or in connection with the software or the use
  ~ or other dealings in the software.
  -->

<div class="card border-0 shadow-sm mt-3 p-3">
    <p class="fs-6 text-secondary mb-3 lh-sm">Company details:</p>
    <a href="{{ companyDetails.site }}" class="btn btn-secondary mb-3 w-100">
        Company website
        <i class="bi bi-box-arrow-up-right ms-2"></i>
    </a>
    <div class="alert alert-warning">
        <h3 class="fs-5 mb-3">Average rating:</h3>
        <div class="hstack gap-3 align-items-center">
            <p class="fs-1 fw-bold lh-1 mb-0 py-3 px-2">
                {{ companyDetails.avgRatings === 'null' ? '?' : companyDetails.avgRatings }}
            </p>
            <div class="vr text-dark"></div>
            <div>
                <div class="mb-0">
                    <i
                        *ngFor="let star of (starsStructure$ | async)"
                        [ngClass]="[ 'bi', star, 'stars-relative-font-size' ]"
                    ></i>
                </div>
                <ng-template *ngIf="companyDetails.opinionsCount === 0; then noOpinions; else haveOpitions"/>
                <ng-template #noOpinions>
                    <p class="fs-xsm mb-0">Company don't have any opinion yet.</p>
                </ng-template>
                <ng-template #haveOpitions>
                    <p class="fs-xsm mb-0">
                        based on <strong>({{ companyDetails.opinionsCount }})</strong> opinions
                    </p>
                </ng-template>
            </div>
        </div>
        <p class="lh-sm mt-2 mb-0 fs-xsm">
            All opinions are verified by <strong>Stars Magnet</strong> team. For additional
            informations, send message at <a class="alert-link" href="mailto:info@starsmagnet.com">info@starsmagnet.com</a>
        </p>
    </div>
    <p class="fs-6 text-secondary mb-2 lh-sm">Company categories:</p>
    <ul class="d-flex flex-wrap list-unstyled">
        <li *ngFor="let category of companyDetails.categories" class="mb-1">
            <a
                [routerLink]="[ '/category', category.id ]"
                class="text-decoration-none bg-primary py-1 px-2 rounded-3 text-light me-2 mb-2 lh-sm fs-xsm"
            >
                {{ category.name }}
            </a>
        </li>
    </ul>
</div>
